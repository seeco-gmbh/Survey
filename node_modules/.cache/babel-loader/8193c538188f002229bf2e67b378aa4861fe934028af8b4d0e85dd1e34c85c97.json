{"ast":null,"code":"var _jsxFileName = \"/Users/pascalseeber/Desktop/survey-process-intelligence-main/src/components/questions/RankedQuestion.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport QuestionElement from './QuestionElement';\nimport { t } from '../../localization';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RankedQuestion = ({\n  question,\n  isError,\n  value = [],\n  onChange,\n  language,\n  isModified = false\n}) => {\n  _s();\n  // Initialize ranking if needed\n  const [ranking, setRanking] = useState(value.length ? value : [...question.options]);\n  const [dragPosition, setDragPosition] = useState(-1);\n  const [draggedItem, setDraggedItem] = useState(-1);\n  const [isDraggingOver, setIsDraggingOver] = useState(false);\n\n  // Update local ranking when value prop changes\n  useEffect(() => {\n    if (value.length) {\n      setRanking(value);\n    } else if (question.options.length && !value.length) {\n      setRanking([...question.options]);\n    }\n  }, [value, question.options]);\n\n  // Handle the actual reordering\n  const handleReordering = (sourceIndex, targetPosition) => {\n    // Skip if dropping onto self or adjacent position\n    if (sourceIndex === targetPosition || sourceIndex === targetPosition - 1 && targetPosition > 0) {\n      return false;\n    }\n\n    // Reorder the items based on the indicator position\n    const newRanking = [...ranking];\n    const [movedItem] = newRanking.splice(sourceIndex, 1);\n\n    // Adjust target index if needed\n    let targetIndex = targetPosition;\n    if (sourceIndex < targetPosition) {\n      targetIndex--;\n    }\n    newRanking.splice(targetIndex, 0, movedItem);\n\n    // Update local state and notify parent\n    setRanking(newRanking);\n    onChange(question.id, newRanking, true);\n    return true;\n  };\n\n  // Common drag and drop handlers\n  const handleDragOver = e => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n    setIsDraggingOver(true);\n  };\n  const handleDragLeave = () => {\n    setIsDraggingOver(false);\n  };\n  const handleDrop = e => {\n    e.preventDefault();\n    const sourceIndex = parseInt(e.dataTransfer.getData('sourceIndex'));\n    if (isNaN(sourceIndex)) return;\n    if (dragPosition >= 0) {\n      handleReordering(sourceIndex, dragPosition);\n    }\n\n    // Reset drag states\n    setDragPosition(-1);\n    setDraggedItem(-1);\n    setIsDraggingOver(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `ranked-question-container ${isDraggingOver ? 'bg-blue-50 rounded transition-colors duration-200' : ''}`,\n    onDragOver: handleDragOver,\n    onDragLeave: handleDragLeave,\n    onDrop: handleDrop,\n    children: /*#__PURE__*/_jsxDEV(QuestionElement, {\n      question: question,\n      isError: isError,\n      language: language,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-3 border rounded ${isError ? 'border-red-500' : isDraggingOver ? 'border-blue-400' : 'border-gray-300'} relative`,\n        onDragOver: e => {\n          e.preventDefault();\n          e.dataTransfer.dropEffect = 'move';\n\n          // Get container dimensions\n          const rect = e.currentTarget.getBoundingClientRect();\n          const mouseY = e.clientY;\n\n          // Get the first item's position if available\n          const firstItem = e.currentTarget.querySelector('li:first-child div');\n          const firstItemTop = firstItem ? firstItem.getBoundingClientRect().top : rect.top + 30;\n\n          // Check if we're at the top of the container (position 0)\n          if (mouseY < firstItemTop - 5) {\n            setDragPosition(0);\n            return;\n          }\n\n          // Check if we're at the bottom of the container\n          if (mouseY > rect.bottom - 20) {\n            setDragPosition(ranking.length);\n            return;\n          }\n        },\n        onDrop: e => {\n          e.preventDefault();\n          const sourceIndex = parseInt(e.dataTransfer.getData('sourceIndex'));\n          if (isNaN(sourceIndex)) return;\n          if (dragPosition >= 0) {\n            handleReordering(sourceIndex, dragPosition);\n          }\n\n          // Reset drag states\n          setDragPosition(-1);\n          setDraggedItem(-1);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-1\",\n          children: ranking.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [dragPosition === 0 && index === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-1 mb-1 bg-blue-600 rounded-full shadow-md animate-pulse cursor-pointer\",\n              style: {\n                zIndex: 10\n              },\n              onDragOver: e => {\n                e.preventDefault();\n                e.stopPropagation();\n                e.dataTransfer.dropEffect = 'move';\n                setDragPosition(0);\n              },\n              onDrop: e => {\n                e.preventDefault();\n                e.stopPropagation();\n                const sourceIndex = parseInt(e.dataTransfer.getData('sourceIndex'));\n                if (isNaN(sourceIndex)) return;\n                handleReordering(sourceIndex, 0);\n                setDragPosition(-1);\n                setDraggedItem(-1);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex items-center p-2 bg-white border rounded cursor-move hover:bg-gray-50 ${dragPosition === index ? 'border-blue-400' : 'border-gray-200'} ${draggedItem === index ? 'opacity-50' : ''}`,\n              draggable: true,\n              onDragStart: e => {\n                e.dataTransfer.setData('sourceIndex', index.toString());\n                e.dataTransfer.effectAllowed = 'move';\n                setDraggedItem(index);\n              },\n              onDragEnd: () => {\n                setDragPosition(-1);\n                setDraggedItem(-1);\n                setIsDraggingOver(false);\n              },\n              onDragOver: e => {\n                e.preventDefault();\n                e.stopPropagation();\n                const rect = e.currentTarget.getBoundingClientRect();\n                const mouseY = e.clientY;\n                const midpoint = rect.top + rect.height / 2;\n\n                // Determine if we should show indicator above or below\n                if (mouseY < midpoint) {\n                  setDragPosition(index);\n                } else {\n                  setDragPosition(index + 1);\n                }\n              },\n              onDrop: e => {\n                e.preventDefault();\n                e.stopPropagation();\n                const sourceIndex = parseInt(e.dataTransfer.getData('sourceIndex'));\n                if (isNaN(sourceIndex)) return;\n                const rect = e.currentTarget.getBoundingClientRect();\n                const mouseY = e.clientY;\n                const midpoint = rect.top + rect.height / 2;\n\n                // Determine drop position based on mouse position\n                const targetPosition = mouseY < midpoint ? index : index + 1;\n\n                // Perform the reordering\n                handleReordering(sourceIndex, targetPosition);\n\n                // Reset drag states\n                setDragPosition(-1);\n                setDraggedItem(-1);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-shrink-0 mr-2 text-gray-400\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  className: \"h-5 w-5\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M4 6h16M4 12h16M4 18h16\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 19\n              }, this), isModified && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-shrink-0 w-6 h-6 flex items-center justify-center bg-gray-200 rounded-full mr-2\",\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-grow\",\n                children: item\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this), dragPosition === index + 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-1 mt-1 bg-blue-600 rounded-full shadow-md animate-pulse cursor-pointer\",\n              style: {\n                zIndex: 10\n              },\n              onDragOver: e => {\n                e.preventDefault();\n                e.stopPropagation();\n                e.dataTransfer.dropEffect = 'move';\n                setDragPosition(index + 1);\n              },\n              onDrop: e => {\n                e.preventDefault();\n                e.stopPropagation();\n                const sourceIndex = parseInt(e.dataTransfer.getData('sourceIndex'));\n                if (isNaN(sourceIndex)) return;\n                handleReordering(sourceIndex, index + 1);\n                setDragPosition(-1);\n                setDraggedItem(-1);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 19\n            }, this)]\n          }, item, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), ranking.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 text-center text-gray-500 italic\",\n          children: t('emptyRankedList', language) || 'Drag items here'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(RankedQuestion, \"2Q780GFi5cHVypFYw2PnkJfTTrc=\");\n_c = RankedQuestion;\nexport default RankedQuestion;\nvar _c;\n$RefreshReg$(_c, \"RankedQuestion\");","map":{"version":3,"names":["React","useState","useEffect","QuestionElement","t","jsxDEV","_jsxDEV","RankedQuestion","question","isError","value","onChange","language","isModified","_s","ranking","setRanking","length","options","dragPosition","setDragPosition","draggedItem","setDraggedItem","isDraggingOver","setIsDraggingOver","handleReordering","sourceIndex","targetPosition","newRanking","movedItem","splice","targetIndex","id","handleDragOver","e","preventDefault","dataTransfer","dropEffect","handleDragLeave","handleDrop","parseInt","getData","isNaN","className","onDragOver","onDragLeave","onDrop","children","rect","currentTarget","getBoundingClientRect","mouseY","clientY","firstItem","querySelector","firstItemTop","top","bottom","map","item","index","style","zIndex","stopPropagation","fileName","_jsxFileName","lineNumber","columnNumber","draggable","onDragStart","setData","toString","effectAllowed","onDragEnd","midpoint","height","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","_c","$RefreshReg$"],"sources":["/Users/pascalseeber/Desktop/survey-process-intelligence-main/src/components/questions/RankedQuestion.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport QuestionElement from './QuestionElement';\nimport { t } from '../../localization';\n\nconst RankedQuestion = ({ \n  question, \n  isError, \n  value = [], \n  onChange, \n  language, \n  isModified = false\n}) => {\n  // Initialize ranking if needed\n  const [ranking, setRanking] = useState(value.length ? value : [...question.options]);\n  const [dragPosition, setDragPosition] = useState(-1);\n  const [draggedItem, setDraggedItem] = useState(-1);\n  const [isDraggingOver, setIsDraggingOver] = useState(false);\n  \n  // Update local ranking when value prop changes\n  useEffect(() => {\n    if (value.length) {\n      setRanking(value);\n    } else if (question.options.length && !value.length) {\n      setRanking([...question.options]);\n    }\n  }, [value, question.options]);\n\n  // Handle the actual reordering\n  const handleReordering = (sourceIndex, targetPosition) => {\n    // Skip if dropping onto self or adjacent position\n    if (sourceIndex === targetPosition || \n        (sourceIndex === targetPosition - 1 && targetPosition > 0)) {\n      return false;\n    }\n    \n    // Reorder the items based on the indicator position\n    const newRanking = [...ranking];\n    const [movedItem] = newRanking.splice(sourceIndex, 1);\n    \n    // Adjust target index if needed\n    let targetIndex = targetPosition;\n    if (sourceIndex < targetPosition) {\n      targetIndex--;\n    }\n    \n    newRanking.splice(targetIndex, 0, movedItem);\n    \n    // Update local state and notify parent\n    setRanking(newRanking);\n    onChange(question.id, newRanking, true);\n    return true;\n  };\n\n  // Common drag and drop handlers\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n    setIsDraggingOver(true);\n  };\n\n  const handleDragLeave = () => {\n    setIsDraggingOver(false);\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    \n    const sourceIndex = parseInt(e.dataTransfer.getData('sourceIndex'));\n    if (isNaN(sourceIndex)) return;\n    \n    if (dragPosition >= 0) {\n      handleReordering(sourceIndex, dragPosition);\n    }\n    \n    // Reset drag states\n    setDragPosition(-1);\n    setDraggedItem(-1);\n    setIsDraggingOver(false);\n  };\n\n  return (\n    <div \n      className={`ranked-question-container ${isDraggingOver ? 'bg-blue-50 rounded transition-colors duration-200' : ''}`}\n      onDragOver={handleDragOver}\n      onDragLeave={handleDragLeave}\n      onDrop={handleDrop}\n    >\n      <QuestionElement question={question} isError={isError} language={language}>\n        <div \n          className={`p-3 border rounded ${isError ? 'border-red-500' : isDraggingOver ? 'border-blue-400' : 'border-gray-300'} relative`}\n          onDragOver={(e) => {\n            e.preventDefault();\n            e.dataTransfer.dropEffect = 'move';\n            \n            // Get container dimensions\n            const rect = e.currentTarget.getBoundingClientRect();\n            const mouseY = e.clientY;\n            \n            // Get the first item's position if available\n            const firstItem = e.currentTarget.querySelector('li:first-child div');\n            const firstItemTop = firstItem ? firstItem.getBoundingClientRect().top : rect.top + 30;\n            \n            // Check if we're at the top of the container (position 0)\n            if (mouseY < firstItemTop - 5) {\n              setDragPosition(0);\n              return;\n            }\n            \n            // Check if we're at the bottom of the container\n            if (mouseY > rect.bottom - 20) {\n              setDragPosition(ranking.length);\n              return;\n            }\n          }}\n          onDrop={(e) => {\n            e.preventDefault();\n            \n            const sourceIndex = parseInt(e.dataTransfer.getData('sourceIndex'));\n            if (isNaN(sourceIndex)) return;\n            \n            if (dragPosition >= 0) {\n              handleReordering(sourceIndex, dragPosition);\n            }\n            \n            // Reset drag states\n            setDragPosition(-1);\n            setDraggedItem(-1);\n          }}\n        >\n          <ul className=\"space-y-1\">\n            {ranking.map((item, index) => (\n              <li key={item}>\n                {/* Add indicator line above first item */}\n                {dragPosition === 0 && index === 0 && (\n                  <div \n                    className=\"h-1 mb-1 bg-blue-600 rounded-full shadow-md animate-pulse cursor-pointer\"\n                    style={{ zIndex: 10 }}\n                    onDragOver={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      e.dataTransfer.dropEffect = 'move';\n                      setDragPosition(0);\n                    }}\n                    onDrop={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      \n                      const sourceIndex = parseInt(e.dataTransfer.getData('sourceIndex'));\n                      if (isNaN(sourceIndex)) return;\n                      \n                      handleReordering(sourceIndex, 0);\n                      setDragPosition(-1);\n                      setDraggedItem(-1);\n                    }}\n                  ></div>\n                )}\n\n                <div \n                  className={`flex items-center p-2 bg-white border rounded cursor-move hover:bg-gray-50 ${\n                    dragPosition === index ? 'border-blue-400' : 'border-gray-200'\n                  } ${draggedItem === index ? 'opacity-50' : ''}`}\n                  draggable\n                  onDragStart={(e) => {\n                    e.dataTransfer.setData('sourceIndex', index.toString());\n                    e.dataTransfer.effectAllowed = 'move';\n                    setDraggedItem(index);\n                  }}\n                  onDragEnd={() => {\n                    setDragPosition(-1);\n                    setDraggedItem(-1);\n                    setIsDraggingOver(false);\n                  }}\n                  onDragOver={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    \n                    const rect = e.currentTarget.getBoundingClientRect();\n                    const mouseY = e.clientY;\n                    const midpoint = rect.top + rect.height / 2;\n                    \n                    // Determine if we should show indicator above or below\n                    if (mouseY < midpoint) {\n                      setDragPosition(index);\n                    } else {\n                      setDragPosition(index + 1);\n                    }\n                  }}\n                  onDrop={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    \n                    const sourceIndex = parseInt(e.dataTransfer.getData('sourceIndex'));\n                    if (isNaN(sourceIndex)) return;\n                    \n                    const rect = e.currentTarget.getBoundingClientRect();\n                    const mouseY = e.clientY;\n                    const midpoint = rect.top + rect.height / 2;\n                    \n                    // Determine drop position based on mouse position\n                    const targetPosition = mouseY < midpoint ? index : index + 1;\n                    \n                    // Perform the reordering\n                    handleReordering(sourceIndex, targetPosition);\n                    \n                    // Reset drag states\n                    setDragPosition(-1);\n                    setDraggedItem(-1);\n                  }}\n                >\n                  <div className=\"flex-shrink-0 mr-2 text-gray-400\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n                    </svg>\n                  </div>\n                  \n                  {isModified && (\n                    <div className=\"flex-shrink-0 w-6 h-6 flex items-center justify-center bg-gray-200 rounded-full mr-2\">\n                      {index + 1}\n                    </div>\n                  )}\n                  \n                  <div className=\"flex-grow\">{item}</div>\n                </div>\n                \n                {/* Insert indicator line below item */}\n                {dragPosition === index + 1 && (\n                  <div \n                    className=\"h-1 mt-1 bg-blue-600 rounded-full shadow-md animate-pulse cursor-pointer\"\n                    style={{ zIndex: 10 }}\n                    onDragOver={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      e.dataTransfer.dropEffect = 'move';\n                      setDragPosition(index + 1);\n                    }}\n                    onDrop={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      \n                      const sourceIndex = parseInt(e.dataTransfer.getData('sourceIndex'));\n                      if (isNaN(sourceIndex)) return;\n                      \n                      handleReordering(sourceIndex, index + 1);\n                      setDragPosition(-1);\n                      setDraggedItem(-1);\n                    }}\n                  ></div>\n                )}\n              </li>\n            ))}\n          </ul>\n          \n          {/* Add a special case for empty lists */}\n          {ranking.length === 0 && (\n            <div className=\"p-4 text-center text-gray-500 italic\">\n              {t('emptyRankedList', language) || 'Drag items here'}\n            </div>\n          )}\n        </div>\n      </QuestionElement>\n    </div>\n  );\n};\n\nexport default RankedQuestion; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}